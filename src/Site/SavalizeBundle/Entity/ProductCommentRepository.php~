<?php

namespace Site\SavalizeBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * ProductCommentRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ProductCommentRepository extends EntityRepository
{
	public function addCommentFirst($customerId)
	{
		$query = $this->getEntityManager()->createQuery('
		    select pc.id as pcId
		    from SiteSavalizeBundle:ProductComment as pc
		    join pc.customer c
		    where c.id = :customerId
		    ')->setParameter('customerId', $customerId);
            return $query->getResult();
	}
	public function addCommentSecond($customerId, $pcId, $comment)
	{
		$query = $this->getEntityManager()->createQuery('
		    
		    ')->setParameter('customerId', $customerId);
            return $query->getResult();
	}
	public function getAllComments($pbId)
	{
		$query = $this->getEntityManager()->createQuery('
		    select pc.comment as comment, u.picture as pic
		    from SiteSavalizeBundle:ProductComment pc join pc.customer c join c.user u  join pc.productBrand pb 
		    where pb.id = :pbId
		    ')->setParameter('pbId', $pbId);
            return $query->getResult();
	}
}

