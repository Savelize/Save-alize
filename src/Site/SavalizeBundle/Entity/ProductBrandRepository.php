<?php

namespace Site\SavalizeBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * ProductBrandRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ProductBrandRepository extends EntityRepository {

    public function getFirstPBfromCategory($catId) {
        $query = $this->getEntityManager()->createQuery('
			select pb
			from SiteSavalizeBundle:ProductBrand pb
			where pb.category = :catId
			')->setParameter('catId', $catId)->setMaxResults(3);
        try {
            return $query->getResult();
        } catch (\Doctrine\ORM\NoResultException $e) {
            return null;
        }
    }

    public function getBrandsOfCategory($catId) {
        $query = $this->getEntityManager()->createQuery('
			select pb
			from SiteSavalizeBundle:ProductBrand pb
			where pb.category = :catId
			')->setParameter('catId', $catId);
        try {
            return $query->getResult();
        } catch (\Doctrine\ORM\NoResultException $e) {
            return null;
        }
    }

    public function productsandbrands($categoryID) {

        $q = $this->getEntityManager()->createQuery('
            SELECT pb
            FROM SiteSavalizeBundle:ProductBrand pb           
             WHERE pb.category = :categoryID       
            ')->setParameter('categoryID', $categoryID);
        $result = $q->getResult();

        return $result;
    }
    
     public function productbrandID($categoryID) {

        $q = $this->getEntityManager()->createQuery('
            SELECT pb.id
            FROM SiteSavalizeBundle:ProductBrand pb           
             WHERE pb.category = :categoryID       
            ')->setParameter('categoryID', $categoryID);
        $result = $q->getResult();

        return $result;
    }

}
